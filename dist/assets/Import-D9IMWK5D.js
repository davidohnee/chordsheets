import{d as b,u as h,o as x,c as k,a as l,t as g,h as d,f as I,b as a,i as p,_ as O}from"./main-c0_bQcCc.js";import{I as i}from"./IconButton-DuYX5QqJ.js";const C={class:"actions"},B=b({__name:"Import",setup(N,{expose:f}){const s=h(),t=p([]),r=p(),v=()=>{t.value=[];const o=document.createElement("input");o.type="file",o.accept=".json",o.onchange=e=>{const n=e.target.files?.[0];if(!n)return;const c=new FileReader;c.onload=_=>{const w=_.target?.result,u=JSON.parse(w);if(!s.songs.length){s.songs=u;return}t.value=u,r.value.showModal()},c.readAsText(n)},o.click()},m=()=>{for(const o of t.value){const e=s.songs.find(n=>n.title===o.title&&n.artist===o.artist);e?Object.assign(e,o):s.songs.push(o)}t.value=[],r.value.close()},y=()=>{s.songs=t.value,t.value=[],r.value.close()};return f({show:v}),(o,e)=>(x(),k("dialog",{ref_key:"addOrOverwrite",ref:r},[l("h1",null,g(t.value.length)+" songs to import",1),l("p",null,[d(" You already have "+g(I(s).songs.length)+" songs in your library. ",1),e[1]||(e[1]=l("br",null,null,-1)),e[2]||(e[2]=d(" Do you want to merge the libraries songs or overwrite the existing one? ",-1))]),l("div",C,[a(i,{label:"Cancel",icon:"close",style:"red",onClick:e[0]||(e[0]=n=>r.value.close())}),a(i,{label:"Merge",icon:"merge",onClick:m}),a(i,{label:"Overwrite",icon:"sync_problem",style:"yellow",onClick:y})])],512))}}),j=O(B,[["__scopeId","data-v-fd9ff333"]]);export{j as I};

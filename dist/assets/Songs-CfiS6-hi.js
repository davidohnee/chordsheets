import{d as V,j as x,u as k,w as C,c as f,a as u,b as r,f as i,h as I,e as b,k as v,l as h,F as q,i as g,o as m,m as D,n as B,_ as N}from"./main-c0_bQcCc.js";import{I as U}from"./IconButton-DuYX5QqJ.js";import{D as L}from"./Dropdown-DJX4tEfG.js";import{T}from"./TextInput-Ca73wkZq.js";import{d as E}from"./vuedraggable.umd-Bh1_f6WQ.js";import{S as M}from"./Song--aOc_pzz.js";/* empty css                                                                   *//* empty css                                                                 */const $={class:"toolbar"},A={class:"filters"},F={key:0,class:"songs"},j={class:"muted"},O=V({__name:"Songs",setup(R){const c=x(),n=k(),w=B(),_=()=>{const o=n.createNew();o.title=s.value.query,w.push(c.editorUrl(o.id))},s=g({artist:"",query:""}),a=g([]);C(()=>{a.value=n.songs.filter(o=>{if(s.value.artist&&s.value.artist!=="(any)"&&!o.artist.toLowerCase().includes(s.value.artist.toLowerCase()))return!1;const e=`${o.title} ${o.artist}`.toLowerCase();return!(s.value.query&&!e.includes(s.value.query.toLowerCase()))})});const S=({moved:o})=>{const e=n.songs.findIndex(d=>d.id===o.element.id),l=a.value[o.newIndex-1%a.value.length],t=l?n.songs.findIndex(d=>d.id===l.id):-1,p=o.newIndex>o.oldIndex?t:t+1;n.moveTo(e,p)},y=window.innerWidth<800;return(o,e)=>{const l=D("router-link");return m(),f(q,null,[u("div",$,[u("div",A,[r(T,{label:"Search",modelValue:s.value.query,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.query=t),placeholder:"Search for a song"},null,8,["modelValue"]),r(L,{label:"Artist",modelValue:s.value.artist,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.artist=t),options:["(any)",...new Set(i(n).songs.map(t=>t.artist).sort())]},null,8,["modelValue","options"])])]),a.value.length?(m(),b(i(E),{key:1,modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value=t),class:"songs",onChange:S,"item-key":"id",onDragover:e[3]||(e[3]=h(()=>{},["stop"])),disabled:y},{item:v(({element:t})=>[r(l,{to:i(c).editorUrl(t.id)},{default:v(()=>[r(M,{song:t,"allow-delete":"",onDelete:p=>i(n).removeSong(t)},null,8,["song","onDelete"])]),_:2},1032,["to"])]),_:1},8,["modelValue"])):(m(),f("div",F,[u("p",j,[e[4]||(e[4]=I(" No songs found. Do you want to add it? ",-1)),r(U,{icon:"add",label:"Add a new song",onClick:_})])]))],64)}}}),X=N(O,[["__scopeId","data-v-c3e4e27d"]]);export{X as default};
